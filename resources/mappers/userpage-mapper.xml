<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="userpageMapper">

	<resultMap id="userInfoResultSet" type="UserInfo">
		<result column="USER_NO" property="userNo"/>
		<result column="USER_NAME" property="userName"/>
		<result column="USER_NICKNAME" property="userNickname"/>
		<result column="USER_EMAIL" property="userEmail"/>
		<result column="USER_PWD" property="userPwd"/>
		<result column="GENDER" property="gender"/>
		<result column="AGE" property="age"/>
		<result column="USER_POINT" property="userPoint"/>
		<result column="ENROLL_DATE" property="enrollDate"/>
		<result column="MODIFY_DATE" property="modifyDate"/>
		<result column="STATUS" property="status"/>
	</resultMap>
	
	<resultMap id="UserPhysicalInfoResultSet" type="UserPhysicalInfo">
		<result column="PINFO_NO" property="pinfoNo"/>
		<result column="USER_NO" property="userNo"/>
		<result column="MEM_HEIGHT" property="memHeight"/>
		<result column="MEM_WEIGHT" property="memWeight"/>
		<result column="MEM_SMM" property="memSmm"/>
		<result column="MEM_BFP" property="memBep"/>
	</resultMap>
	
	<resultMap id="UserDietRecordResultSet" type="UserDietRecord">
		<result column="MR_NO" property="mrNo"/>
		<result column="USER_NO" property="userNo"/>
		<result column="FOOD_NO" property="foodNo"/>
		<result column="FOOD_COUNT" property="foodCount"/>
		<result column="WHEN_EAT_DATE" property="whenEatDate"/>
	</resultMap>
	
	<resultMap id="UserExerciseRecordResultSet" type="ExerciseRecord">
		<result column="EXR_NO" property="exRecordNo"/>
		<result column="USER_NO" property="exRecordUser"/>
		<result column="EX_NO" property="exName"/>
		<result column="EXR_DATE" property="exRecordDate"/>
		<result column="EXR_SET" property="exRecordSet"/>
		<result column="EXR_WEIGHT" property="exRecordWeight"/>
		<result column="EXR_COUNT" property="exRecordCount"/>
	</resultMap>
	
	<resultMap id="UserExerciseRecordResultSet" type="UserPicture">
		<result column="PIC_NO" property="picNo"/>
		<result column="USER_NO" property="userNo"/>
		<result column="ORIGIN_NAME" property="originName"/>
		<result column="CHANGE_NAME" property="changeName"/>
		<result column="FILE_PATH" property="filePath"/>
	</resultMap>

	<select id="SearchUserInfo" parameterType="UserInfo" >
 		SELECT USER_NO,
 				USER_NAME,
 				USER_NICKNAME,
 				USER_EMAIL,
 				USER_PWD,
 				GENDER,
 				AGE,
 				USER_POINT,
 				ENROLL_DATE,
 				MODIFY_DATE,
 				STATUS
 		FROM MEMBER
		WHERE NICKNAME = #{nickname}
		AND STATUS = 'Y'
 	</select>
 	
 	<select id="SearchUserPhysicalInfo" parameterType="UserPhysicalInfo" >
 		SELECT PINFO_NO,
 				USER_NO,
 				MEM_HEIGHT,
 				MEM_WEIGHT,
 				MEM_SMM,
 				MEM_BFP
 		FROM MEMBER
 		JOIN MEM_PHYSICAL_INFO USING (USER_NO)
		WHERE NICKNAME = #{nickname}
		AND STATUS = 'Y'
 	</select>
 	
 	<select id="SearchUserDietRecord" parameterType="UserDietRecord" >
 		SELECT MR_NO,
 				USER_NO,
 				FOOD_NO,
 				FOOD_COUNT,
 				WHEN_EAT_DATE
 		FROM MEMBER
 		JOIN MEAL_RECORD USING (USER_NO)
		WHERE NICKNAME = #{nickname}
		AND STATUS = 'Y'
 	</select>
 	
 	<select id="SearchUserExerciseRecord" parameterType="ExerciseRecord" >
 		SELECT PINFO_NO,
 				USER_NO,
 				MEM_HEIGHT,
 				MEM_WEIGHT,
 				MEM_SMM,
 				MEM_BFP
 		FROM MEMBER
 		JOIN EX_RECORD USING (USER_NO)
		WHERE NICKNAME = #{nickname}
		AND STATUS = 'Y'
 	</select>
 	
 	<select id="SearchUserPicture" parameterType="UserPicture" >
 		SELECT PIC_NO,
 				USER_NO,
 				ORIGIN_NAME,
 				CHANGE_NAME,
 				FILE_PATH,
 		FROM MEMBER
 		JOIN EX_RECORD USING (USER_NO)
		WHERE NICKNAME = #{nickname}
		AND STATUS = 'Y'
 	</select>
 	




  
  
</mapper>