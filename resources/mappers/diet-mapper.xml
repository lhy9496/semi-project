<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="dietMapper">
  
  	<resultMap id="UserDietRecordResultSet" type="UserDietRecord">
		<result column="MR_NO" property="mrNo"/>
		<result column="USER_NO" property="userNo"/>
		<result column="FOOD_NO" property="foodNo"/>
		<result column="FOOD_COUNT" property="foodCount"/>
		<result column="WHEN_EAT_DATE" property="whenEatDate"/>
	</resultMap>
	
	<resultMap id="foodResultSet" type="Food">
		<result column="FOOD_NO" property="foodNo" />
		<result column="FOOD_NAME" property="foodName" />
		<result column="FOOD_KCAL" property="foodKcal" />
		<result column="CARB" property="foodCarb" />
		<result column="PROTEIN" property="foodProtein" />
		<result column="FAT" property="foodFat" />
	
	</resultMap>
	
	
  	<select id="SearchUserDietRecord" parameterType="String" resultMap="UserDietRecordResultSet">
 		SELECT MR_NO,
 				USER_NO,
 				FOOD_NO,
 				FOOD_COUNT,
 				WHEN_EAT_DATE
 		FROM MEMBER
 		JOIN MEAL_RECORD USING (USER_NO)
		WHERE USER_NICKNAME = #{nickname}
		AND STATUS = 'Y'
 	</select>
 	
 	<select id="selectFoodList" resultMap="foodResultSet">
 		SELECT FOOD_NO,
				FOOD_NAME,
				FOOD_KCAL,
				CARB,
				PROTEIN,
				FAT
		  FROM	FOOD
 	</select>
 	
  </mapper>